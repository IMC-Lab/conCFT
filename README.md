# Neural differences between dispositional and situational episodic counterfactual thoughts

_Abstract_: <will be added once paper is approved for publication>

# About this repo
### Behavioral data & analyses
Behavioral data from Session 1 and 2 of the experiment can be found in ['behavData'](https://github.com/IMC-Lab/conCFT/tree/master/behavData). This directory also contains `all_data.csv`, the dataframe used for all behavioral analyses, which contains data from both sessions. If you wish to easily reproduce, investigate, and/or build upon reported results, this is the dataframe you should use. If you are interested in checking out how the data were filtered and prepared for analyses, you will want to use the files linked in [`behavData/session1`](https://github.com/IMC-Lab/conCFT/tree/master/behavData/session1) and [`behavData/session2`](https://github.com/IMC-Lab/conCFT/tree/master/behavData/session2). Each of these directories contains one folder per participant, and that folder contains all of that participant's data. For descriptions of the organizations of these directories, and the data within them, click [here](#behavioral-data-details).

*_Please note_*: Due to the sensitive and potentially identifiable nature of the memory titles and descriptions, we have omitted these variables from the provided data. All analyses are reproducible without them. Files containing these variables can be provided upon reasonable request.

<br>

`behavioral_analysis.R` contains the code used to run the behavioral analyses reported both in the main text and in the supplement, along with plots and tables communicating those results.

<br>

### PLS data & analysis
PLS analyses were conducted using a [PLS toolbox](https://www.rotman-baycrest.on.ca/index.php?section=84) in MATLAB developed at the [Rotman Research Institute](https://www.baycrest.org/Baycrest/Research-Innovation/About-Us/Rotman-Research-Institute). `PLS/makeTextFiles.R` is the script used to make the timing files used for the PLS analysis. It writes results into the [`PLS/datamats`](https://github.com/IMC-Lab/conCFT/tree/master/PLS/datamats) directory, which contains the text files used for the PLS analysis and the datamats generated by those text files that were used for the PLS analysis. It also contains the files `correctedMeanCentered1000perm250bs_fMRIresult.mat` and `correctedMeanCentered1000perm250bs_fMRI_bs_plot.mat`, which contain the results of the PLS analysis and the temporal brain scores respectively.

The relevant information extracted from these datamats and saved in `.csv` files can be found in [`PLS/results`](https://github.com/IMC-Lab/conCFT/tree/master/PLS/results). This directory also contains the salience maps for TRs 4 and 5 that are reported in the paper. The code for plotting the results from the PLS analysis can be found in [`PLS/plotPLSresults.R`]. BSR cluster reports were generated with the PLS GUI. MNI coordinates were converted to Talairach space using `PLS/Talairach template.xls`, and region names were retrieved using the [Talairach Daemon](http://www.talairach.org/manual.html#CommandLine). Salience maps were layered on top of a skull-stripped 0.5mm MNI brain masked by a 1mm MNI using [FSLeyes](https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FSLeyes).

<br>

### Univariate data
Unthresholded zstat maps for the simple univariate contrasts and parametric modulation analyses can be found on [NeuroVault](https://identifiers.org/neurovault.collection:12098).

<br>

### Task script & stimuli
The [`task`](https://github.com/IMC-Lab/conCFT/tree/master/task) directory contains the scripts used for data collection.
- `conCFT_practice.m`: runs the practice version of the experiment all participants completed prior to entering the scanner
- `conCFT_scan.m`: runs the task participants completed in the scanner
- `orientationFix.m`: runs the orientation discrimination task
- `Jitter`: contains the screens presented to participants during the inter-trial orientation discrimination task
- `Ratings`: contains the screens used to collect eCFT characteristics during the scan

*_Please note_*: The experiment scripts will expect a memory title variable in your input files (which are `memlist_final_sX.csv` in [`behavData/session1`](https://github.com/IMC-Lab/conCFT/tree/master/behavData/session1)). The scripts won't run out of the box because we removed the memory titles to de-identify the data. You will need to add a `Title` column to your input files to get the script to run (at a minimum. It wouldn't hurt to double-check your filepaths too).

<br>

# Questions? Comments?
Email makhouda [at] uci.edu.

<br> 

### Behavioral data details
Here's a description of the files contained in each participant's subdirectory within [`behavData/session1`](https://github.com/IMC-Lab/conCFT/tree/master/behavData/session1):
- `memlist_final_sX.csv`: the final list of memories chosen as stimuli for Session 2 (eventNum), ratings for each of the 5 memory characteristics (Detail, Vividness, Valence, Regret, Control), each experimenter's rating of the suitability of that memory for use in Session 2 (R1 and R2) and the mean of those ratings (rating), the condition that memory was pseudorandomly assigned to (condition; 1=dispositional, 2=situational), and the subject ID (subID)
- `memlist_disagreement.csv`: the full set of 80 memories collected during Session 1 along with memory characteristic ratings and the final co-ratings of memory suitability provided by experimenters. It is sorted by decreasing values in the `difference` column, which allowed experimenters to pinpoint the memories with greatest disagreement during rating titration. These files were used to compute Cronbach's alpha over the full set of 80 experimenter ratings prior to selecting the top 64 memories for use in Session 2.
- `psq_sX.csv`: the post-study questionnaire containing eCFT Frequency ratings provided by participants after exiting the scanner.

Within [`behavData/session2`](https://github.com/IMC-Lab/conCFT/tree/master/behavData/session2), each participant has 4 `.csv` files containing behavioral data collected during each run of the scanning session. Most of the column names should be obvious, and the script used to run the task & collect data exists at [`task/conCFT_scan.m`](https://github.com/IMC-Lab/conCFT/tree/master/task/conCFT_scan.m). But here's an overview of them anyway:
- `sub`, `run`, `trial`, `condition` are self-explanatory. The coding for conditions is 1=dispositional, 2=situational
- `fixOnsetTime`: time of onset for the fixation cross that indicates the start of a trial
- `jitter1`, `jitter3`: durations defining the length of fixation before & after the orientation discrimination task (in seconds)
- `jitterStim2`: duration of orientation discrimination task (in seconds)
- `jitterResp`: participants' responses to the arrows. 0=no response, 1=left, 2=right. If jitterStim3=NaN and jitterResp only contains 2 values, that is a trial for which there were only 2 arrows presentable within the jitter duration defined in `jitterStim2`.
- `jitterAccuracy`: accuracy on the orientation discrimination task
- `memOnsetTime`: absolute time of onset of the memory cue
- `evenNum`: identifying number for each participants memory
- `memRTtime`: absolute time of memory button press
- `memRT`: time between memory cue onset and memory button press (in seconds)
- `cftOnsetTime`: absolute time of eCFT cue
- `endCFT`: absolute time when eCFT cue left the screen
- `plaubilityOrder`, `controlOrder`, `difficultyOrder`: number indicating which position in the sequence of 3 ratings each eCFT rating would be presented
- `plausibilityOnsetTime`, `controlOnsetTime`, `difficultyOnsetTime`: absolute time of eCFT rating onset
- `plausibilityResponse`, `controlResponse`, `difficultyResponse`: eCFT rating provided by participant in the scanner
- `plausibilityRT`, `controlRT`, `difficultyRT`: time between eCFT rating onset and response. unfortunately a bug in the code resulted in these values being inaccurately stored and thus rendered useless.
- `trialEnd`: absolute time of trial end
